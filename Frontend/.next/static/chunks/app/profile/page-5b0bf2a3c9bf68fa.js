(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{7408:function(e,r,t){Promise.resolve().then(t.bind(t,8166))},3382:function(e,r,t){"use strict";t.d(r,{H:function(){return AuthProvider},a:function(){return useAuth}});var o=t(7437),l=t(2265);let n=(0,l.createContext)(null),AuthProvider=e=>{let{children:r}=e,[t,s]=(0,l.useState)(!1),[i,a]=(0,l.useState)(null);return(0,l.useEffect)(()=>{try{let e=localStorage.getItem("user");e&&"undefined"!==e&&(a(JSON.parse(e)),s(!0))}catch(e){console.error("Error parsing user data from local storage",e),localStorage.removeItem("user")}},[]),(0,o.jsx)(n.Provider,{value:{user:i,setUser:a,isAuthenticated:t,setIsAuthenticated:s,logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),s(!1),a(null)}},children:r})},useAuth=()=>{let e=(0,l.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},8166:function(e,r,t){"use strict";t.r(r);var o=t(7437),l=t(2265),n=t(3382),s=t(7292),i=t(9804),a=t(603),u=t.n(a);r.default=()=>{var e;(0,l.useEffect)(()=>{document.title="Profile - HoloLearn"},[]);let{user:r,logout:t}=(0,n.a)(),[a,c]=(0,l.useState)({open:!1,message:"",severity:""});if(!r)return(0,o.jsx)("div",{className:u().loading,children:"Loading..."});let handleDeleteUser=async()=>{if(!(null==r?void 0:r.email)){c({open:!0,message:"User email is required",severity:"error"});return}try{let e=await fetch("http://localhost:4000/delete-user",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.email})});if(!e.ok)throw Error("Failed to delete user");let t=await e.json();c({open:!0,message:t.message,severity:"success"}),window.location.href="/"}catch(r){let e=r instanceof Error?r.message:"An unknown error occurred";console.error(e),c({open:!0,message:e,severity:"error"})}},handleCloseSnackbar=()=>{c({...a,open:!1})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:u().profileContainer,children:[(0,o.jsx)("h1",{className:u().profileTitle,children:"Profile"}),(0,o.jsxs)("p",{className:u().profileSubtitle,children:["Welcome, ",r.firstname||r.name||"User","!"]}),(0,o.jsxs)("p",{className:u().profileDetail,children:[(0,o.jsx)("strong",{children:"Name:"})," ",r.firstname," ",r.lastname]}),(0,o.jsxs)("p",{className:u().profileDetail,children:[(0,o.jsx)("strong",{children:"Number of Assets:"})," ",null===(e=r.assets)||void 0===e?void 0:e.length]}),(0,o.jsxs)("p",{className:u().profileDetail,children:[(0,o.jsx)("strong",{children:"Email:"})," ",r.email]}),(0,o.jsx)("button",{onClick:handleDeleteUser,className:u().logoutButton,children:"Delete Account"})]}),(0,o.jsx)(s.Z,{open:a.open,autoHideDuration:6e3,onClose:handleCloseSnackbar,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,o.jsx)(i.Z,{onClose:handleCloseSnackbar,severity:a.severity,sx:{width:"100%"},children:a.message})})]})}},603:function(e){e.exports={profileContainer:"profile_profileContainer__WNUBw",profileTitle:"profile_profileTitle__WHQoV",profileDetail:"profile_profileDetail__qKVgq",logoutButton:"profile_logoutButton__Uicg_",profileSubtitle:"profile_profileSubtitle__RGoMo"}}},function(e){e.O(0,[816,117,971,472,744],function(){return e(e.s=7408)}),_N_E=e.O()}]);